<% @rules_cfg.each do |group, vals| -%>
<%= group %>: {
  banner: '<%= vals['banner'] %>',
  <% if vals.has_key?('dnsbl') -%>
  dnsbl: '<%= vals['dnsbl'] %>',
  <% end -%>
  <% if vals.has_key?('reject_spf') -%>
  reject_spf: [<%= vals['reject_spf'].join(', ') %>],
  <% end -%>
  <% if vals.fetch('reject_spam', nil) == 'spamassassin' -%>
  reject_spam: {type: spamassassin},
  <% end -%>
  <% if vals.has_key?('only_recipients') -%>
  only_recipients: [
    <% vals['only_recipients'].each do |rcpt| -%>
    "<%= rcpt %>"
    <% end -%>
  ],
  <% end -%>
},

<% end -%>
# vim:sw=2:ts=2:sts=2:et:ai:
